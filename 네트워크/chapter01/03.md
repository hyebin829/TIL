# 전 세계의 DNS 서버

## DNS 서버의 기본 동작

클라이언트에서 조회 메시지를 받고 조회의 내용에 응답하는 형태로 정보를 회답한다.

조회 메시지에 포함된 정보 :  
(a) 이름 - 서버나 메일 배송 목적지와 같은 이름

(b) 클래스 - 인터넷 이외의 네트워크에서의 이용을 고려하여 클래스라는 정보가 있었으나 현재는 인터넷 이외의 네트워크는 소멸되어 인터넷을
나타내는 'IN'값만 있다.

(c) 타입 - 이름에 어떤 타입의 정보가 지원되는지 나타냄. 이 타입에 따라 클라이언트에 회답하는 내용이 달라진다.

클라이언트가 이름, 클래스, 타입을 포함한 정보를 보내면 DNS 서버는 등록된 정보로 이 세가지가 일치하는 것을 찾아서 클라이언트에 보낸다.

</br>
</br>

## 도메인의 계층

정보들은 다수의 DNS 서버에 분산되어 등록되어 있다. 다수의 DNS 서버는 연대하여 정보를 찾아낸다.

DNS 서버에 등록한 정보에는 **도메인명** 이라는 계층적 구조를 가진 이름이 붙여져 있다.

DNS에서 취급하는 이름은 www.github.com과 같이 점으로 구분되어 있는데, 이 점이 계층을 구분한다. 오른쪽에 위치할수록 상위의 계층을 나타낸다.  
점으로 구분된 것들을 각각 도메인이라고 한다.

하나의 도메인 정보는 하나의 DNS 서버에 등록된다.  
도메인의 아래에 하위 도메인을 할당할 수도 있다.

</br>
</br>

## 담당 DNS서버를 찾아 IP주소를 가져온다.

하위의 도메인을 담당하는 DNS 서버의 IP 주소를 그 상위의 DNS 서버에 등록하는 식으로 차례대로 등록한다.  
상위의 DNS 서버에 가면 하위의 DNS 서버의 IP 주소를 알 수 있고 그곳에서 조회 메시지를 보낼 수 있다.

인터넷의 도메인은 com이나 kr의 상위에 또 하나의 **루트 도메인** 이 있다.

루트 도메인의 DNS 서버를 인터넷에 존재하는 DNS 서버에 전부 등록하여 어느 DNS서버에서든 루트 도메인에 액세스할수 있도록 한다.

</br>
</br>

## DNS 서버의 캐시 기능

DNS 서버는 한 번 조사한 이름을 캐시에 기록할 수 있는데, 조회한 이름에 해당하는 정보가 캐시에 있으면 그 정보를 회답한다.

정보가 존재하지 않는 경우에도 존재하지 않는다는 것을 캐시에 보존하여 빠르게 회답할 수 있다.

캐시에 저장되는 정보가 변경될 수도 있으므로 유효 기한을 설정하고, 기한이 지나면 삭제한다. 또한 회답할 때 정보가 캐시에 저장된것인지, DNS 서버에서 회답한 것인지 알려준다.
