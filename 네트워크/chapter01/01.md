# 웹 브라우저가 메시지를 만든다

## 01 HTTP 리퀘스트 메시지를 작성한다.

### URL

브라우저에는 다양한 클라이언트 기능이 있기 때문에 여러 종류의 URL로 여러개의 기능 중 어떤 것을 사용하여 데이터에 액세스 하면 좋을 것인지 판단한다.

URL의 맨 앞에 있는 문자열에서 액세스 하는 방법을 나타낸다. (액세스 할 때의 프로토콜 종류)

```
프로토콜 : 통신 동작의 규칙을 정한 것
```

- HTTP 프로토콜로 웹 서버에 액세스 : `http:`
- FTP 프로토콜로 파일을 다운로드하거나 업로드 : `ftp:`
- 클라이언트 PC 자체의 파일에서 데이터를 읽어오는 경우 : `file:`
- 메일을 송신하는 경우 : `mailto:`
- 뉴스그룹의 기사를 읽는 경우 : `news:`

앞 부분에 따라 뒤에 계속해서 쓰는 방법이 결정된다.

</br>
</br>

### 브라우저는 먼저 URL을 해독

브라우저가 처음 하는 일은 웹 서버에 보내는 리퀘스트의 메시지를 작성하기 위해 URL을 해독하는 것이다.
해독을 위해 URL을 분해한다.

`http:` + `//` + `www.abc.com` + `/` + `dir1` + `/` + `file1.html`

`www.abc.com`이라는 웹 서버에 있는 `/dir1/file1.html` 이라는 경로의 파일에 엑세스 한다는 의미이다.

</br>
</br>

### 파일명을 생략한 경우

URL에서 파일명을 생략한 경우가 있다.  
파일명을 쓰지 않으면 서버에서 미리 설정해 둔 파일로 접근하게 된다.  
대부분의 서버가 `index.html` 또는 `default.htm` 이라는 파일명을 설정해둔다.

웹 서버의 도메인명만 쓴 URL 또한 서버에서 설정해 둔 파일로 접근하게 된다.

</br>
</br>

### HTTP의 기본 개념

HTTP 프로토콜 : 클라이언트와 서버가 주고받는 메시지의 내용이나 순서를 정한 것

1. 클라이언트에서 서버로 리퀘스트 메시지를 보낸다.

- URI : 보통 페이지 데이터를 저장한 파일의 이름이나 CGI 프로그램의 파일명. 다양한 액세스 대상을 쓸 수 있다.
- 메소드 : 웹 서버에 어떤 동작을 하고싶은지 전달.

2. 리퀘스트 메시지가 웹 서버에 도착하면 웹 서버는 내용을 해독하고 결과 데이터를 응답 메시지에 저장한다.

- 스테이터스 코드 : 실행 결과 상태를 나타낸다. 응답 메시지의 맨 앞부분에 위치

3. 응답 메시지를 클라이언트에 반송한다.
4. 클라이언트에 도착하면 브라우저가 메시지의 안에서 데이터를 추출해 화면에 표시한다.

</br>
</br>

### 리퀘스트 메시지

- 리퀘스트 메시지

```
// 리퀘스트 라인
<메소드><공백><URI><공백><HTTP 버전>
// 메시지 헤더 - 리퀘스트의 부가적인 정보를 나타냄
<필드명>:<필드값>
.
.
.
<공백 행>
// 메시지 본문 - 클라이언트에서 서버에 송신하는 데이터,
폼 페이지에 입력한 데이터를 POST 메소드로 웹 서버에 보낼 경우의 데이터 등
<메시지 본문>
```

</br>
</br>

### 응답 메시지

- 응답 메시지

```
//스테이터스 라인
<HTTP 버전><공백><스테이터스 코드><공백><응답 문구>
// 메시지 헤더
<필드명>:<필드값>
.
.
.
<공백 행>
// 메시지 본문 - 서버에서 클라이언트에 송신하는 데이터, 파일에서 읽은 데이터,
CGI 애플리케이션이 출력한 데이터
메시지 본문은 바이너리 데이터로 취급함
<메시지 본문>
```

```
* 바이너리 데이터 : 컴퓨터에서 처리되는 이진 형식의 데이터. 이진 형식은 0과 1로 구성된다.
```

리퀘스트 메시지에 쓰는 URI는 하나뿐이므로 복수의 파일을 읽을 때는 웹 서버에 별도의 리퀘스트 메시지를 보낸다.
